<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Google tag (gtag.js) -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-LSD9SBN63E"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());

      gtag("config", "G-LSD9SBN63E");
    </script>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Average Calculator</title>
    <link rel="stylesheet" href="styles.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />
  </head>
  <body>
    <div class="banner">
      <h1>GWA Calculator</h1>
    </div>

    <div id="parent-container">
      <div class="body">
        <!-- <form action=""> -->

        <h3>BS - CpE 3A 2nd Semester</h3>
        <h4>University of Rizal System Antipolo Campus</h4>
        <table id="grades">
          <tr>
            <th>Subject:</th>
            <th class="units">Units:</th>
            <th class="grade">Grade:</th>
          </tr>
          <tr>
            <td>Art Appreciation:</td>
            <td class="units">3</td>
            <td class="grade"><input type="number" id="f" /></td>
          </tr>
          <tr>
            <td>Methods of Research:</td>
            <td class="units">2</td>
            <td class="grade"><input type="number" id="e" /></td>
          </tr>
          <tr>
            <td>Elective Course 1 (Artificial Intelligence):</td>
            <td class="units">3</td>
            <td class="grade"><input type="number" id="d" /></td>
          </tr>
          <tr>
            <td>Microprocessors:</td>
            <td class="units">4</td>
            <td class="grade"><input type="number" id="c" /></td>
          </tr>
          <tr>
            <td>Computer Network and Security:</td>
            <td class="units">4</td>
            <td class="grade"><input type="number" id="b" /></td>
          </tr>
          <tr>
            <td>Basic Occupational Health and Safety:</td>
            <td class="units">3</td>
            <td class="grade"><input type="number" id="a" /></td>
          </tr>
          <tr>
            <td>Technopreneurship:</td>
            <td class="units">3</td>
            <td class="grade"><input type="number" id="g" /></td>
          </tr>
          <tr class="avg">
            <td>Average:</td>
            <td class="units">22</td>
            <td class="grade" id="avg">0</td>
          </tr>
        </table>

        <button
          data-html2canvas-ignore="true"
          class="compute"
          type="submit"
          onclick="average()"
        >
          Compute
        </button>
        <i
          data-html2canvas-ignore="true"
          class="fa fa-print fa-lg print"
          onclick="transformToImage()"
          aria-hidden="true"
        ></i>
        <!-- </form> -->
      </div>
    </div>
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <div class="gradient1"></div>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <script>
      function downloadImage(dataUrl) {
        var link = document.createElement("a");
        link.href = dataUrl;
        link.download = "grades.png";

        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
      }

      function transformToImage() {
        html2canvas(document.getElementById("parent-container")).then(function (
          canvas
        ) {
          // create a secondary canvas
          let canvas1 = document.createElement("canvas");
          canvas1.width = 1000; // set the desired width
          canvas1.height = 1500; // set the desired height
          let ctx1 = canvas1.getContext("2d");

          // calculate the source coordinates
          let sourceX = (canvas.width - canvas1.width) / 2;
          let sourceY = (canvas.height - canvas1.height) / 2;
          let sourceWidth = canvas1.width;
          let sourceHeight = canvas1.height;

          // draw the cropped section of the original canvas onto the secondary canvas
          ctx1.drawImage(
            canvas,
            sourceX,
            sourceY,
            sourceWidth,
            sourceHeight,
            0,
            0,
            canvas1.width,
            canvas1.height
          );

          // get the data URL of the secondary canvas
          const dataUrl = canvas1.toDataURL("image/png");
          downloadImage(dataUrl);
        });
      }
    </script>
    <script src="script.js"></script>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
  </body>
</html>
